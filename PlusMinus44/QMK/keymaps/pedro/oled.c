// Copyright 2022 Julian Tarczynski
// PlusMinus40 based on mochi40
#include QMK_KEYBOARD_H
#include "variables.h"

// '1', 60x53px
static const char pedro1 [] PROGMEM = {
	0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 128, 192, 192, 224, 224, 240,
	240, 240, 252, 252, 252, 254, 254, 255, 255, 255, 255, 255, 255, 255, 255, 255,
	255, 255, 255, 255, 254, 254, 252, 252, 252, 240, 240, 240, 224, 192, 192, 192,
	128, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 128,
	224, 240, 248, 252, 254, 255, 255, 255, 255, 255, 255, 255, 127, 63, 31, 159,
	159, 143, 199, 199, 199, 231, 247, 247, 119, 39, 7, 7, 7, 7, 39, 119,
	247, 247, 255, 255, 223, 223, 191, 191, 255, 255, 255, 255, 255, 255, 254, 252,
	248, 240, 224, 0, 0, 0, 0, 0, 128, 224, 255, 255, 255, 255, 255, 247,
	195, 3, 3, 3, 3, 3, 131, 225, 248, 254, 15, 7, 3, 1, 0, 0,
	132, 192, 224, 240, 240, 240, 128, 128, 0, 0, 0, 0, 128, 192, 240, 224,
	192, 132, 5, 3, 15, 63, 255, 255, 255, 255, 255, 255, 255, 31, 3, 64,
	96, 0, 0, 0, 127, 255, 193, 131, 15, 63, 255, 255, 255, 240, 248, 120,
	60, 31, 15, 7, 3, 1, 0, 0, 0, 56, 124, 254, 255, 255, 255, 255,
	255, 255, 247, 247, 240, 240, 240, 240, 247, 255, 255, 255, 255, 127, 30, 0,
	0, 0, 15, 31, 255, 255, 127, 63, 7, 0, 0, 0, 0, 0, 128, 0,
	16, 17, 3, 3, 0, 0, 0, 1, 3, 7, 14, 28, 56, 120, 112, 64,
	0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 3, 3, 3, 3, 3,
	3, 3, 3, 3, 3, 3, 1, 1, 0, 0, 0, 0, 0, 0, 4, 6,
	7, 3, 0, 0, 0, 0, 224, 252, 254, 63, 31, 0, 0, 0, 6, 6,
	30, 124, 248, 192, 128, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
	0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
	0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
	0, 15, 63, 7, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1,
	3, 4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
	0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
	0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
	0, 0, 0, 0
};
// // '2', 60x53px
// static const char pedro2 [] PROGMEM = {
// 	0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 128, 192, 192, 192, 224,
// 	240, 240, 240, 252, 252, 252, 254, 254, 255, 255, 255, 255, 255, 255, 255, 255,
// 	255, 255, 255, 255, 255, 254, 254, 252, 252, 252, 240, 240, 240, 224, 192, 192,
// 	192, 128, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
// 	128, 224, 240, 248, 252, 254, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,
// 	255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,
// 	255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 254,
// 	252, 248, 240, 224, 0, 0, 0, 0, 0, 128, 224, 255, 255, 255, 255, 255,
// 	255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,
// 	255, 255, 127, 127, 63, 63, 191, 159, 223, 223, 159, 159, 31, 15, 15, 111,
// 	239, 239, 239, 239, 255, 223, 207, 223, 191, 255, 255, 255, 255, 255, 255, 255,
// 	255, 252, 224, 0, 0, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,
// 	255, 255, 255, 127, 127, 127, 127, 63, 63, 63, 7, 193, 240, 252, 124, 62,
// 	30, 30, 223, 79, 15, 15, 131, 128, 128, 0, 0, 0, 0, 3, 7, 3,
// 	3, 131, 131, 1, 19, 3, 7, 15, 31, 127, 255, 255, 255, 255, 255, 124,
// 	0, 31, 63, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 248, 240,
// 	224, 0, 0, 128, 192, 252, 254, 63, 31, 3, 0, 0, 0, 0, 128, 240,
// 	248, 254, 255, 255, 255, 190, 184, 176, 128, 128, 128, 220, 223, 255, 255, 255,
// 	255, 254, 120, 0, 0, 0, 7, 15, 255, 127, 31, 0, 0, 0, 0, 7,
// 	7, 7, 15, 31, 63, 63, 120, 240, 193, 3, 31, 63, 127, 126, 254, 255,
// 	199, 195, 128, 0, 0, 0, 0, 0, 0, 0, 7, 7, 15, 15, 31, 31,
// 	31, 31, 31, 31, 31, 31, 15, 15, 15, 15, 7, 7, 3, 1, 0, 0,
// 	0, 0, 0, 2, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
// 	0, 0, 12, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 3, 7, 7,
// 	6, 6, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
// 	0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
// 	0, 0, 0, 0
// };
// // '3', 60x53px
// static const char pedro3 [] PROGMEM = {
// 	0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 128, 192, 224, 240, 248, 248,
// 	252, 252, 254, 254, 254, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,
// 	255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 254, 254, 254, 252,
// 	248, 248, 248, 240, 224, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
// 	0, 224, 240, 252, 254, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,
// 	255, 255, 127, 63, 63, 159, 223, 207, 207, 7, 7, 3, 3, 27, 29, 61,
// 	31, 31, 29, 13, 12, 15, 111, 15, 31, 63, 127, 255, 255, 255, 255, 255,
// 	255, 254, 240, 128, 12, 0, 0, 0, 0, 0, 0, 240, 252, 255, 255, 255,
// 	255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 135, 131, 241, 248, 60, 14,
// 	6, 7, 35, 3, 1, 192, 224, 240, 224, 192, 128, 128, 0, 0, 0, 112,
// 	126, 126, 126, 252, 248, 248, 224, 128, 1, 7, 15, 15, 31, 127, 255, 25,
// 	0, 0, 0, 0, 0, 0, 0, 255, 255, 255, 255, 255, 255, 255, 255, 207,
// 	135, 131, 3, 1, 1, 1, 1, 251, 255, 255, 32, 0, 0, 0, 0, 0,
// 	254, 255, 255, 255, 255, 255, 255, 251, 248, 248, 252, 252, 254, 126, 127, 63,
// 	63, 31, 3, 0, 0, 0, 0, 0, 0, 0, 3, 0, 0, 0, 0, 0,
// 	0, 0, 0, 3, 7, 255, 255, 255, 255, 207, 31, 31, 63, 127, 255, 252,
// 	240, 240, 254, 255, 7, 1, 0, 0, 0, 0, 0, 0, 0, 1, 3, 3,
// 	1, 1, 1, 3, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0,
// 	0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
// 	0, 0, 0, 3, 3, 7, 15, 6, 158, 8, 0, 1, 3, 3, 3, 7,
// 	7, 7, 14, 14, 12, 12, 12, 0, 0, 0, 0, 0, 0, 0, 0, 0,
// 	0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
// 	0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
// 	0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 12, 8, 8, 24, 0, 0,
// 	0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
// 	0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
// 	0, 0, 0, 0
// };
// // '4', 60x53px
// static const char pedro4 [] PROGMEM = {
// 	0, 0, 0, 0, 0, 0, 0, 0, 128, 192, 224, 240, 248, 248, 252, 252,
// 	254, 254, 254, 255, 255, 255, 255, 255, 255, 127, 255, 255, 63, 191, 255, 255,
// 	255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 252, 240, 192, 128, 24, 0,
// 	0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 224,
// 	240, 252, 254, 255, 255, 255, 255, 255, 255, 255, 255, 127, 63, 159, 207, 199,
// 	199, 3, 1, 4, 6, 15, 7, 7, 3, 3, 1, 65, 192, 196, 192, 193,
// 	195, 195, 131, 7, 15, 31, 63, 63, 63, 127, 248, 160, 0, 0, 0, 0,
// 	2, 7, 126, 252, 224, 128, 0, 0, 0, 240, 252, 255, 255, 255, 255, 255,
// 	255, 255, 255, 31, 7, 1, 240, 248, 30, 15, 39, 35, 1, 0, 0, 240,
// 	248, 240, 240, 224, 224, 224, 0, 0, 135, 207, 207, 231, 247, 255, 255, 255,
// 	120, 0, 0, 0, 0, 0, 1, 7, 0, 0, 0, 0, 0, 0, 0, 7,
// 	15, 63, 60, 120, 0, 255, 255, 255, 255, 255, 255, 127, 63, 31, 15, 7,
// 	0, 0, 127, 255, 248, 224, 0, 0, 0, 0, 7, 63, 127, 255, 255, 255,
// 	255, 126, 126, 127, 63, 31, 31, 15, 7, 7, 3, 1, 0, 0, 0, 0,
// 	0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
// 	0, 3, 7, 255, 255, 255, 255, 252, 252, 252, 248, 240, 224, 192, 192, 255,
// 	255, 255, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
// 	0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
// 	0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
// 	0, 3, 15, 28, 56, 56, 113, 99, 7, 7, 7, 7, 15, 15, 14, 14,
// 	14, 14, 12, 12, 12, 4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
// 	0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
// 	0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
// 	0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 16, 16, 16, 16, 0,
// 	0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
// 	0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
// 	0, 0, 0, 0
// };
// // '5', 60x53px
// static const char pedro5 [] PROGMEM = {
// 	0, 0, 0, 0, 0, 0, 0, 0, 128, 192, 224, 240, 248, 252, 252, 252,
// 	254, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 63, 191, 255,
// 	191, 255, 255, 255, 255, 255, 255, 255, 255, 255, 254, 252, 248, 249, 240, 128,
// 	0, 0, 0, 0, 0, 0, 0, 128, 0, 0, 0, 0, 0, 0, 0, 0,
// 	224, 240, 248, 254, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,
// 	255, 63, 31, 15, 3, 25, 28, 31, 15, 15, 3, 1, 0, 2, 226, 224,
// 	224, 225, 241, 241, 225, 193, 195, 135, 7, 7, 7, 15, 15, 60, 112, 0,
// 	0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 252, 255, 255, 255, 255,
// 	255, 255, 255, 255, 255, 255, 255, 255, 255, 15, 3, 129, 248, 126, 63, 12,
// 	0, 0, 0, 240, 240, 240, 224, 224, 224, 224, 192, 3, 135, 199, 243, 249,
// 	255, 255, 255, 127, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
// 	0, 0, 0, 0, 0, 0, 0, 255, 255, 255, 255, 255, 255, 255, 255, 255,
// 	255, 255, 255, 255, 248, 224, 0, 63, 255, 240, 192, 128, 1, 0, 0, 0,
// 	15, 63, 255, 255, 255, 255, 252, 126, 127, 63, 63, 31, 15, 3, 1, 0,
// 	0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
// 	0, 0, 0, 1, 63, 127, 255, 255, 255, 255, 255, 255, 255, 255, 207, 135,
// 	129, 128, 128, 0, 0, 3, 15, 255, 254, 240, 0, 0, 0, 0, 0, 1,
// 	1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
// 	0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
// 	0, 0, 0, 3, 15, 31, 63, 127, 255, 255, 255, 255, 255, 191, 31, 31,
// 	31, 30, 62, 124, 127, 127, 124, 60, 60, 60, 60, 28, 28, 28, 28, 12,
// 	0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
// 	0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
// 	0, 0, 0, 0, 0, 1, 1, 1, 3, 7, 7, 7, 7, 7, 7, 6,
// 	0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 16, 0, 0, 0, 0, 0,
// 	0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
// 	0, 0, 0, 0
// };
// // '6', 60x53px
// static const char pedro6 [] PROGMEM = {
// 	0, 0, 0, 0, 0, 0, 0, 0, 0, 128, 192, 224, 240, 248, 252, 252,
// 	252, 254, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,
// 	255, 127, 127, 255, 255, 255, 255, 127, 127, 127, 63, 63, 63, 63, 127, 126,
// 	124, 124, 120, 120, 112, 224, 192, 0, 0, 0, 0, 0, 0, 0, 0, 0,
// 	0, 224, 240, 252, 254, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,
// 	255, 255, 255, 255, 255, 255, 255, 255, 63, 15, 35, 63, 63, 62, 63, 63,
// 	15, 1, 0, 0, 7, 32, 112, 240, 248, 248, 248, 120, 248, 248, 240, 224,
// 	128, 0, 0, 3, 0, 0, 0, 0, 0, 0, 0, 192, 252, 255, 255, 255,
// 	255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,
// 	255, 63, 15, 1, 252, 252, 248, 240, 224, 0, 0, 0, 0, 224, 224, 224,
// 	224, 224, 224, 225, 3, 129, 225, 252, 255, 255, 255, 127, 15, 0, 0, 0,
// 	0, 0, 0, 0, 0, 0, 0, 63, 255, 255, 255, 255, 255, 255, 255, 255,
// 	255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 252, 128, 8,
// 	63, 255, 255, 255, 192, 0, 6, 0, 0, 0, 7, 15, 31, 127, 255, 255,
// 	255, 255, 127, 63, 31, 7, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0,
// 	0, 0, 0, 0, 3, 63, 127, 255, 255, 255, 255, 255, 255, 255, 255, 255,
// 	255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 31, 2, 0, 1, 3,
// 	7, 15, 62, 254, 248, 224, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
// 	0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
// 	0, 0, 0, 1, 7, 15, 31, 63, 127, 255, 255, 255, 255, 255, 255, 255,
// 	255, 255, 255, 255, 255, 255, 254, 252, 252, 252, 254, 254, 124, 124, 124, 124,
// 	125, 127, 127, 127, 56, 56, 28, 30, 30, 14, 7, 7, 3, 0, 0, 0,
// 	0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
// 	0, 0, 0, 0, 0, 0, 1, 1, 1, 3, 7, 7, 7, 15, 31, 31,
// 	31, 31, 31, 31, 31, 31, 31, 31, 30, 30, 28, 28, 30, 14, 6, 4,
// 	0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
// 	0, 0, 0, 0
// };

// static const char* pedro_frames[6] = {
// 	pedro1,
// 	pedro2,
// 	pedro3,
// 	pedro4,
// 	pedro5,
// 	pedro6,
// };

static void pedro(void) {
	//static int orientation = 2;
	oled_set_cursor(0, 0);
    oled_write_raw_P(pedro1, sizeof(pedro1));
	// if(pedro_frame == 5){
	// 	//oled_init_user(orientation);
	// 	pedro_frame = 0;
	// 	//orientation == 3 ? orientation=0 : orientation++;
	// }else
	// 	pedro_frame++;
}

oled_rotation_t oled_init_user(oled_rotation_t rotation) {
	oled_clear();								// Clear screen on bootup
    return OLED_ROTATION_180;  					// Flips the display 180 degrees
}

bool oled_task_user(void) {
	// WPM == 0 AND time passed -> sleep / turn off screen
	if (timer_elapsed32(sleep_timer) > OLED_SLEEP) {
		oled_off();
		return 0;
	}

	// Frame update time passed -> draw new frame
	if (timer_elapsed32(frame_timer) > FRAME_DURATION) {
		frame_timer = timer_read32();			// Get Last frame millis

		// Prepare OLED to render
		oled_clear();							// Turn on OLED and clear
		oled_on();
		oled_set_cursor(9, 0);
		oled_write(get_u8_str(get_current_wpm(), '0'), false);
		// Pedro, Pedro, Pedro, Pedro, Pe...
		pedro();
	}
    return 0;
}

